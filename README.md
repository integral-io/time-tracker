# time-tracker

developer focused time track tool where users interact via slack to record their hours.

## Database setup on mac / linux

You'll need to run a local docker instance of ms sql server on your mac or linux box to be able to run 
the app locally. Here are instructions on how to do that: https://medium.com/@jamesrf/local-sql-server-running-in-container-mac-linux-for-use-with-ef-e37c17308754

The database name, userid and password are configured in the app under the appsettings.json (Development one for local).

## testing locally against Slack

You'll need to change the url to which Slack calls out in the config here:
https://api.slack.com/apps/AFA9JRRBK/slash-commands?

Then start a ngrok session locally that aims from the url to you local machine:
From the terminal: `# ngrok http 5000`
This will tunnel http port to local port 5000. If need https replace `http` for `https`.

Edit the `/hours` slack command and replace the url portion with what is generated by ngrok.

## Testing commands using local unit tests

Go to project TimeTracker.Api.Test and look at the:
`time-tracker-webapi/test/TimeTracker.Api.Test/SlackSlashCommandControllerTest.cs`

These examples basically bring up a server and test end to end.

## Pending Security issue

When a command comes in, we currently don't validate the message really being from slack, there is a way to do this: https://api.slack.com/docs/verifying-requests-from-slack

## Slack useful links

APi for Slash commands: https://api.slack.com/slash-commands
Our Apps: https://api.slack.com/apps (this is where we can find the integral time tracker setup)
Our Integral Time Tracker app setup page for slack commands: https://api.slack.com/apps/AFA9JRRBK/slash-commands?
